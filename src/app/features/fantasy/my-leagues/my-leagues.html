<div class="league-dashboard" *ngIf="currentLeague">

    <!-- HEADER -->
    <div class="league-header animate">
        <h2 class="league-title">{{ currentLeague.league.name }}</h2>

        <div class="league-meta">
            <span class="privacy" [class.private]="currentLeague.league.privacy === 'private'">
                {{ currentLeague.league.privacy === 'private' ? 'Privada ðŸ”’' : 'PÃºblica ðŸ”“' }}
            </span>

            <span class="teams-count">Equipos: {{ currentLeague.teams.length }}</span>

            <span class="created-at">
                Creada: {{ currentLeague.league.created_at | date:'dd/MM/yyyy' }}
            </span>
        </div>
    </div>

    <!-- GRID PRINCIPAL -->
    <div class="dashboard-grid">

        <!-- PANEL IZQUIERDO: MI EQUIPO -->
        <div class="panel panel-me animate">
            <h3>Mi Equipo</h3>

            <div class="me-name">{{ currentLeague.me.team_name }}</div>

            <div class="me-stats">
                <div>
                    <label>Puntos</label>
                    <strong>{{ currentLeague.me.points }}</strong>
                </div>

                <div>
                    <label>PosiciÃ³n</label>
                    <strong>{{ myRank }}</strong>
                </div>

                <div>
                    <label>Admin</label>
                    <strong>{{ currentLeague.me.is_admin ? 'SÃ­' : 'No' }}</strong>
                </div>
            </div>
        </div>

        <!-- PANEL CENTRAL: RANKING -->
        <div class="panel panel-ranking animate">
            <h3>Ranking</h3>

            <div class="ranking-list">
                <div class="rank-item" *ngFor="let team of currentLeague.teams; index as i"
                    [class.me]="team.team_id === currentLeague.me.team_id">

                    <span class="pos">{{ i + 1 }}</span>

                    <div class="team-info">
                        <span class="team-name">{{ team.team_name }}</span>
                        <span class="owner">@{{ team.owner }}</span>
                    </div>

                    <span class="pts">{{ team.points }}</span>
                </div>
            </div>
        </div>

        <!-- PANEL DERECHO: TRADES -->
        <div class="panel panel-trades animate">
            <h3>Movimientos recientes</h3>

            <div *ngIf="currentLeague.recent_trades.length === 0" class="no-trades">
                No hubo movimientos recientes.
            </div>

            <div class="trade-row" *ngFor="let tr of currentLeague.recent_trades">
                <div class="trade-player">
                    {{ tr.player_id }}
                </div>

                <div class="trade-info">
                    <span class="team">{{ tr.team_name }}</span>
                    <span class="owner">@{{ tr.owner }}</span>
                </div>

                <span class="trade-action" [class.add]="tr.action === 'in'" [class.remove]="tr.action === 'out'">
                    {{ tr.action === 'in' ? 'âž• Alta' : 'âž– Baja' }}
                </span>
            </div>

        </div>

    </div>

    <!-- PAGINADOR -->
    <div class="pagination-row" *ngIf="leagues.length > 1">
        <button (click)="prevLeague()" [disabled]="currentIndex === 0">â—€</button>
        <span>{{ currentIndex + 1 }} / {{ leagues.length }}</span>
        <button (click)="nextLeague()" [disabled]="currentIndex === leagues.length - 1">â–¶</button>
    </div>

</div>

<div *ngIf="leagues.length === 0" class="empty-text">
    No participas en ninguna liga.
</div>