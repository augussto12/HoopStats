<div class="page">
    <h1 class="title">Equipos de la NBA</h1>
    <p class="subtitle">Seleccione un equipo para más detalles o agréguelo a favoritos.</p>

    <div class="filters">
        <input type="text" placeholder="Buscar equipo..." [(ngModel)]="searchTerm" class="search-input" />

        <select [(ngModel)]="selectedDivision" class="select">
            <option value="">Todas las divisiones</option>
            <option *ngFor="let d of divisions" [value]="d">{{ d }}</option>
        </select>
    </div>

    <div *ngIf="loadingTeams" class="empty">Cargando equipos...</div>
    <div *ngIf="!loadingTeams && error" class="empty">{{ error }}</div>

    <div class="columns">
        <section class="panel">
            <h2 class="panel-title">Conferencia Este</h2>
            <div class="list">
                <div class="card" *ngFor="let team of filteredTeams(teamsEast)">
                    <div class="left">
                        <img [src]="team.logo" />
                        <div>
                            <div class="name" [routerLink]="['/teams', team.id]">{{ team.fullName || team.name }}</div>
                            <div class="meta">{{ team.city }} - {{ team.leagues?.standard?.division }}</div>
                        </div>
                    </div>
                    <ng-container *ngIf="auth.isLoggedIn()">
                        <button class="btn" [disabled]="isFavorite(team)" (click)="addToFavorites(team)"
                            [class.btn-disabled]="isFavorite(team)">
                            <span *ngIf="!isFavorite(team)">⭐ Agregar</span>
                            <span *ngIf="isFavorite(team)">✔ Agregado</span>
                        </button>
                    </ng-container>
                </div>
            </div>
        </section>

        <section class="panel">
            <h2 class="panel-title">Conferencia Oeste</h2>
            <div class="list">
                <div class="card" *ngFor="let team of filteredTeams(teamsWest)">
                    <div class="left">
                        <img [src]="team.logo" [alt]="team.fullName || team.name" />
                        <div>
                            <div class="name" [routerLink]="['/teams', team.id]">{{ team.fullName || team.name }}</div>
                            <div class="meta">{{ team.city }} - {{ team.leagues?.standard?.division }}</div>
                        </div>
                    </div>

                    <ng-container *ngIf="auth.isLoggedIn()">
                        <button class="btn" [disabled]="isFavorite(team)" (click)="addToFavorites(team)"
                            [class.btn-disabled]="isFavorite(team)">
                            <span *ngIf="!isFavorite(team)">⭐ Agregar</span>
                            <span *ngIf="isFavorite(team)">✔ Agregado</span>
                        </button>
                    </ng-container>
                </div>
            </div>
        </section>
    </div>
</div>