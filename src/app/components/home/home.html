<div class="home-wrapper">

  <section class="top-section">

    <!-- ===========================
      PR√ìXIMOS PARTIDOS
============================ -->
    <div class="left-column">
      <div class="panel next-panel">
        <h2>üìÖ Pr√≥ximos partidos de hoy</h2>

        <div *ngIf="errorNext" class="empty">{{ errorNext }}</div>

        <div class="next-list-grid" *ngIf="nextGames.length">

          <div class="next-mini-card" *ngFor="let g of nextGames" [routerLink]="['/game-details', g.id]">

            <div class="teams-row">

              <!-- Visitante -->
              <div class="team-col">
                <img [src]="g.visitors.logo" class="team-logo" (load)="onImageLoad($event)"
                  (error)="onImageError($event)" />
                <span class="team-name">{{ g.visitors.name }}</span>
              </div>

              <!-- VS + Hora -->
              <div class="center-col">
                <span class="vs">VS</span>
                <span class="time">{{ g.timeLocal }}</span>
              </div>

              <!-- Local -->
              <div class="team-col">
                <img [src]="g.home.logo" class="team-logo" (load)="onImageLoad($event)"
                  (error)="onImageError($event)" />
                <span class="team-name">{{ g.home.name }}</span>
              </div>

            </div>

            <div class="arena-mini">{{ g.arena }}</div>

          </div>

        </div>

        <div *ngIf="!nextGames.length && !errorNext" class="empty">
          No hay pr√≥ximos partidos.
        </div>


        <!-- Mensaje si no hay partidos -->
        <div *ngIf="!nextGames.length && !errorNext" class="empty">
          No hay pr√≥ximos partidos.
        </div>
      </div>
    </div>


    <!-- ===========================
          MEJORES JUGADORES
    ============================ -->
    <div class="panel players-panel">
      <h2>üèÜ Mejores jugadores del d√≠a de ayer</h2>

      <div *ngIf="errorPlayers" class="empty">{{ errorPlayers }}</div>

      <div *ngIf="bestPlayers.length" class="players-grid">
        <div class="player-card" *ngFor="let p of bestPlayers; trackBy: trackPlayers">
          <h3>{{ p.category }}</h3>
          <p><span>{{ p.player }}</span> | <strong>{{ p.value }}</strong></p>
        </div>
      </div>

      <div *ngIf="!bestPlayers.length && !errorPlayers" class="empty">
        No hay datos disponibles.
      </div>
    </div>


    <!-- ===========================
          PARTIDOS EN VIVO
    ============================ -->
    <div class="panel live-panel">
      <h2>
        Partidos en vivo <span class="live-dot"></span>
      </h2>

      <div *ngIf="errorLive" class="empty">{{ errorLive }}</div>

      <div *ngIf="liveGames.length" class="live-list">

        <div class="live-card" *ngFor="let g of liveGames; trackBy: trackGame" [routerLink]="['/game-details', g.id]">

          <div class="teams">

            <!-- VISITANTE -->
            <div class="team">
              <img [src]="g.visitors?.logo" class="team-logo" (load)="onImageLoad($event)"
                (error)="onImageError($event)" loading="lazy" width="38" height="38" />
              <span>{{ g.visitors?.name }}</span>
            </div>

            <!-- SCORE -->
            <div class="score-box">

              <div class="score-line">
                <span class="score-num" [ngClass]="{
                  'winner': (g.visitors?.pts ?? 0) > (g.home?.pts ?? 0),
                  'loser':  (g.visitors?.pts ?? 0) < (g.home?.pts ?? 0),
                  'draw':   (g.visitors?.pts ?? 0) === (g.home?.pts ?? 0)
                }">
                  {{ g.visitors?.pts ?? '-' }}
                </span>

                <span class="dash">‚Äì</span>

                <span class="score-num" [ngClass]="{
                  'winner': (g.home?.pts ?? 0) > (g.visitors?.pts ?? 0),
                  'loser':  (g.home?.pts ?? 0) < (g.visitors?.pts ?? 0),
                  'draw':   (g.home?.pts ?? 0) === (g.visitors?.pts ?? 0)
                }">
                  {{ g.home?.pts ?? '-' }}
                </span>
              </div>

              <div class="score-meta">
                <span class="period">{{ g.period }}C</span>
                <span class="dot">‚Ä¢</span>
                <span class="clock">{{ g.clock || 'En juego' }}</span>
              </div>

            </div>

            <!-- LOCAL -->
            <div class="team">
              <img [src]="g.home?.logo" class="team-logo" (load)="onImageLoad($event)" (error)="onImageError($event)"
                loading="lazy" width="38" height="38" />
              <span>{{ g.home?.name }}</span>
            </div>

          </div>

          <div class="arena">{{ g.arena }}</div>
        </div>

      </div>

      <!-- EMPTY SI NO HAY PARTIDOS -->
      <div *ngIf="!liveGames.length && !errorLive" class="empty">
        No hay partidos en vivo actualmente.
      </div>

    </div>

  </section>
</div>